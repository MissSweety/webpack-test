<!DOCTYPE html>

<body>

<canvas id="canvas" width="100" height="100" ></canvas>
<button id="downloadImageBtn">Download Image</button>  
</body>

<script>
var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");
ctx.fillStyle="gray";
ctx.fillRect(0,0,100,100);

var dlButton = document.getElementById("downloadImageBtn");  
bindButtonEvent(dlButton, "click", saveAsLocalImage);
function bindButtonEvent(element, type, handler)  
            {
                   if(element.addEventListener) {  
                      element.addEventListener(type, handler, false);  
                   } else {  
                      element.attachEvent('on'+type, handler);  
                   }  
            } 

function saveAsLocalImage () {
  var myCanvas = document.getElementById("canvas");
  var image = myCanvas.toDataURL("image/png").replace("image/png", "image/octet-stream;");
  var saveLink = document.createElement( 'a');
  saveLink.href =image;
  saveLink.download = 'test.png'; saveLink.click();
}

</script>
</html>